(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{412:function(s,t,a){"use strict";a.r(t);var e=a(10),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"使用docker-compose搭建一个订阅计费管理器wallos-统计流媒体或vps账单"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用docker-compose搭建一个订阅计费管理器wallos-统计流媒体或vps账单"}},[s._v("#")]),s._v(" 使用Docker-compose搭建一个订阅计费管理器Wallos,统计流媒体或vps账单")]),s._v(" "),a("InArticleAdsense",{attrs:{"data-ad-client":"ca-pub-5818850638223663","data-ad-slot":"1327307385"}}),s._v(" "),a("h2",{attrs:{id:"🫢前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🫢前言"}},[s._v("#")]),s._v(" 🫢前言")]),s._v(" "),a("p",[s._v("平时订阅了许多流媒体，也买了很多vps，但想知道自己一年在这些东西上花多少钱很麻烦，总想找一个能帮我们统计这些订阅制费用的软件，好让我们心中有数。有人用notion或excel等来统计自己在这些订阅制产品上的花费，但个人感觉还是有些不方便和简陋。之前在微信中使用过一个叫做“有数鸟”的订阅制管理小程序，可以管理比如Netflix，spotify或爱奇艺等流媒体的计费，但毕竟是在微信公众号中，自己感觉不方便。并且图标仅限于这些流媒体。后来也放弃使用了。接着在GitHub上发现了Wallos这个项目，开源且可以自托管，使用起来稍微安心和方便一些。")]),s._v(" "),a("h2",{attrs:{id:"🫠介绍及展示"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🫠介绍及展示"}},[s._v("#")]),s._v(" 🫠介绍及展示")]),s._v(" "),a("p",[a("strong",[s._v("特性")]),s._v("：")]),s._v(" "),a("p",[s._v("订阅管理：跟踪您的定期订阅和付款，确保您不会错过截止日期。")]),s._v(" "),a("p",[s._v("分类管理：将您的费用组织成可自定义的类别，帮助您了解自己的消费习惯。")]),s._v(" "),a("p",[s._v("多货币支持：Wallos支持多种货币，使您能够以所选货币管理财务。")]),s._v(" "),a("p",[a("strong",[s._v("货币转换：与Fixer API集成，可以获取汇率并在主要货币中查看所有订阅内容。")]),s._v("（我觉得这是最吸引我的地方）")]),s._v(" "),a("p",[s._v("数据隐私：作为自托管应用程序，Wallos确保您的财务数据在自己的服务器上保持私密和安全。")]),s._v(" "),a("p",[s._v("定制化：根据需要个性化设置Wallos的类别、货币、主题和其他显示选项。")]),s._v(" "),a("p",[s._v("排序选项：允许从不同排序方式查看您的订阅内容。")]),s._v(" "),a("p",[s._v("徽标搜索: 如果没有可供上传，则Wallos可以在网络上搜索您订阅服务的徽标图案.")]),s._v(" "),a("p",[s._v("移动视图: 随时使用移动设备浏览Wallos.")]),s._v(" "),a("p",[s._v("统计信息: 从另一个角度了解你的开销.")]),s._v(" "),a("p",[s._v("通知: 通过电子邮件收到即将到期付款提醒")]),s._v(" "),a("p",[a("strong",[s._v("展示")]),s._v("：")]),s._v(" "),a("p",[s._v("随便添加了几个来展示一下，可以看见，因为这个是在网络上搜索icon的，所以就算是冷门的icon也能找到，实在找不到就可以自己上传一个。这些价格都是Fixer自动转换汇率之后的结果。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/28/ncGeDxOX4UjkWoH.png",alt:"屏幕截图 2023-12-28 125756.png"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/28/PI8FzE9n3Q2LXYf.png",alt:"屏幕截图 2023-12-28 124953.png"}})]),s._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://s2.loli.net/2023/12/28/ob4LkvUP7nExm63.jpg",alt:"an"}}),s._v(" "),a("p",[s._v("Github仓库："),a("a",{attrs:{href:"https://github.com/ellite/Wallos?tab=readme-ov-file",target:"_blank",rel:"noopener noreferrer"}},[s._v("Wallos"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"🤐安装部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🤐安装部署"}},[s._v("#")]),s._v(" 🤐安装部署")]),s._v(" "),a("h3",{attrs:{id:"😇准备工作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#😇准备工作"}},[s._v("#")]),s._v(" 😇准备工作")]),s._v(" "),a("p",[s._v("更新系统，我使用的是Debian11系统（Ubuntu同理）")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" update -y "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" upgrade -y\n")])])]),a("p",[s._v("安装必要工具")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nano")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v("  -y\n")])])]),a("h3",{attrs:{id:"🐋安装docker，docker-compose并配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐋安装docker，docker-compose并配置"}},[s._v("#")]),s._v(" 🐋安装docker，docker-compose并配置")]),s._v(" "),a("ol",[a("li",[s._v("下载docker")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" -qO- get.docker.com "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("设置docker开机自启")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("systemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" docker\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("重启docker")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("systemctl restart docker\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("安装docker-compose")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -L "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://github.com/docker/compose/releases/download/1.29.2/docker-compose-'),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" -s"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("-"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" -m"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v(" -o /usr/local/bin/docker-compose\n")])])]),a("ol",{attrs:{start:"5"}},[a("li",[s._v("docker-compose赋权")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /usr/local/bin/docker-compose\n")])])]),a("ol",{attrs:{start:"6"}},[a("li",[s._v("修改时区为上海")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" timedatectl set-timezone Asia/Shanghai\n")])])]),a("h3",{attrs:{id:"🫤项目部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🫤项目部署"}},[s._v("#")]),s._v(" 🫤项目部署")]),s._v(" "),a("ol",[a("li",[s._v("创建存配置文件的目录,然后进入目录下。")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /opt/wallos\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /opt/wallos\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("创建docker-compose.yaml")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nano")]),s._v(" docker-compose.yaml\n")])])]),a("p",[s._v("写入以下内容：")]),s._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3.0'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("services")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("wallos")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("container_name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" wallos\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" bellamy/wallos"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("latest\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8282:80/tcp"')]),s._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#冒号左边为打开网页时输入的端口")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("environment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("TZ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Asia/Shanghai'")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Volumes store your data between container upgrades")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./db:/var/www/html/db'")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./logos:/var/www/html/images/uploads/logos'")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restart")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" unless"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("stopped\n")])])]),a("p",[s._v("然后按住"),a("code",[s._v("ctrl")]),s._v("键按"),a("code",[s._v("x")]),s._v("键，之后输入"),a("code",[s._v("y")]),s._v("按回车保存。")]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[s._v("拉取镜像部署")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker-compose up -d\n")])])]),a("p",[s._v("静等镜像自动拉取并自动启动应用后输入 "),a("code",[s._v("ip:端口")]),s._v("打开网页，根据上面的配置文件我的端口是8282.")]),s._v(" "),a("p",[s._v("如果需要配置反向代理用域名访问请参考这篇："),a("a",{attrs:{href:"https://www.yunieebk.com/2023/07/30/caddy%E7%9A%84%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8%EF%BC%8C%E4%B8%8B%E8%BD%BDcaddy%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E5%92%8C%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%8F%91-%E7%BB%AD%E6%9C%9Fssl-%E8%AF%81%E4%B9%A6/",target:"_blank",rel:"noopener noreferrer"}},[s._v("caddy配置反向代理"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"🐺使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐺使用"}},[s._v("#")]),s._v(" 🐺使用")]),s._v(" "),a("h3",{attrs:{id:"🚪后台"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🚪后台"}},[s._v("#")]),s._v(" 🚪后台")]),s._v(" "),a("p",[s._v("打开网页会让我们先创建一个登录账号，并选择自己使用的货币")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/28/v1BD8HeRN7TYPGk.png",alt:"屏幕截图 2023-12-28 121606.png"}})]),s._v(" "),a("p",[s._v("然后就可以登录了")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/28/aFnOi1XQHAPuoD2.png",alt:"屏幕截图 2023-12-28 121743.png"}})]),s._v(" "),a("p",[s._v("点击头像旁的小箭头就可以选择进入设置和总账单统计。")]),s._v(" "),a("blockquote",[a("p",[s._v("黑色或白色主题在设置里切换")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/28/yjJUSbtxsFg24LA.png",alt:"屏幕截图 2023-12-28 132721.png"}})]),s._v(" "),a("h3",{attrs:{id:"🐒添加订阅产品"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐒添加订阅产品"}},[s._v("#")]),s._v(" 🐒添加订阅产品")]),s._v(" "),a("p",[s._v("可以看到，只需要在名称里输入关键词就可以点击右侧的小放大镜来搜索，如果搜索不到就试着换关键词，等获取图标之后再改成你想要的名称就可以了，也可以点击"),a("code",[s._v("Upload Logo")]),s._v("来上传本地图片。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/28/YOcVdTf9ZgwbrBR.png",alt:"屏幕截图 2023-12-28 122017.png"}})]),s._v(" "),a("p",[s._v("这个URL可以填写一下，因为填写之后可以在主界面直接打开")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/28/MrbDFo6wsVH3Gxt.png",alt:"屏幕截图 2023-12-28 142324.png"}})]),s._v(" "),a("p",[s._v("先点击一下产品再，点击这个小地球就可以直接跳转到产品界面，所以你可以将URL设置为vps后台面板或者付款界面。很方便就能打开了。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/28/K3UjCTJaysARrfu.png",alt:"屏幕截图 2023-12-28 142525.png"}})]),s._v(" "),a("h3",{attrs:{id:"🦥配置fixer汇率转换"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🦥配置fixer汇率转换"}},[s._v("#")]),s._v(" 🦥配置Fixer汇率转换")]),s._v(" "),a("p",[s._v("想要配置汇率转换功能就可以使用fixer，首先打开这个链接申请一个免费的fixer api： "),a("a",{attrs:{href:"https://fixer.io/#pricing_plan",target:"_blank",rel:"noopener noreferrer"}},[s._v("fixer api申请链接"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("打开之后根据自己的情况选择一个api PLAN，个人的话免费的应该也够用。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/28/tc6glBQoLp9FIvG.png",alt:"屏幕截图 2023-12-28 143033.png"}})]),s._v(" "),a("p",[s._v("填写信息后注册号就会直接跳转到Dashboard的api界面，复制获取到的api")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/28/4u3jkUVQ2o6aXvN.png",alt:"屏幕截图 2023-12-28 143415.png"}})]),s._v(" "),a("p",[s._v("然后我们回到我们搭建的Wallos，点击头像旁的小箭头，点击setting选项进入设置界面。滑到下面，可以看到 Fixer API Key 一栏，填入你刚才获取到的api key点击save即可。你可以选择DisPlay setting一栏中第二个选项，使你输入的外币账单在展示时直接转换为人民币展示。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/28/J5eyQYrZG6ODKFl.png",alt:"屏幕截图 2023-12-28 144004.png"}})]),s._v(" "),a("p",[a("strong",[s._v("❗❗")]),s._v("刚刚配置完汇率汇率显示是有问题的，所以你应该先将setting里个人资料部分的Main Currency改成你添加的产品的货币，比如欧元或者美元，保存后再修改回Chinese Yuan再次保存。就会正常显示转换后的人民币了。以后你添加订阅账单时就直接选择账单的原始货币就可以了。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/12/28/LfYWuJVtT1iPc3E.png",alt:"屏幕截图 2023-12-28 144529.png"}})]),s._v(" "),a("h2",{attrs:{id:"🫥后记"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🫥后记"}},[s._v("#")]),s._v(" 🫥后记")]),s._v(" "),a("p",[s._v("还有其他功能比如邮件提醒功能想要配置的可以搜索一下你想使用的邮箱的STMP配置，但要注意这是以明文传输的，所以我也就没配置，项目作者推荐为了安全起见，创建一个专门用于此目的的邮箱账户。其他的自定义分类等也可以自己摸索一下。总的来说，这已经满足了我的大部分需求，很方便掌握我的消费。（话说添加之后发现买鸡真的是温水煮青蛙🐸，没想到一年这么多钱😬）。\n"),a("InArticleAdsense",{attrs:{"data-ad-client":"ca-pub-5818850638223663","data-ad-slot":"1327307385"}})],1)],1)}),[],!1,null,null,null);t.default=r.exports}}]);