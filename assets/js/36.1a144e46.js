(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{409:function(t,s,a){"use strict";a.r(s);var n=a(10),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"闲置vps利用计划-搭建属于自己的个人相册photoprism"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#闲置vps利用计划-搭建属于自己的个人相册photoprism"}},[t._v("#")]),t._v(" 闲置VPS利用计划——搭建属于自己的个人相册PhotoPrism")]),t._v(" "),a("InArticleAdsense",{attrs:{"data-ad-client":"ca-pub-5818850638223663","data-ad-slot":"1327307385"}}),t._v(" "),a("h2",{attrs:{id:"🥳前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🥳前言"}},[t._v("#")]),t._v(" 🥳前言")]),t._v(" "),a("p",[t._v("为什么需要搭建自己的相册，因为自己搭建的相册更具隐私性，并且这可以通过网页随时随地查看。虽然看似图床也有类似的功能，但是首先大多数图床不具备展示视频的功能，而且这个本就是为了作为相册而设计的，所以还有很多特色功能。根据官方介绍有强大的搜索功能，面部识别，地图和地点，相册分享，广泛的文件格式支持，支持高级元数据提取等。总的来说是非常好用的。")]),t._v(" "),a("blockquote",[a("p",[t._v("建议在有更大的内存的服务器上运行。官方建议是4G，大于2G内存的添加SWAP后可尝试运行")])]),t._v(" "),a("p",[a("strong",[t._v("截图展示：")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/11/07/LsgiEaZSInNFuW8.png",alt:"tupian"}})]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/photoprism/photoprism",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub仓库链接"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://demo-zh.photoprism.app/library/browse",target:"_blank",rel:"noopener noreferrer"}},[t._v("Demo"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"🐈‍⬛开始搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐈‍⬛开始搭建"}},[t._v("#")]),t._v(" 🐈‍⬛开始搭建")]),t._v(" "),a("h3",{attrs:{id:"🤯准备工作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🤯准备工作"}},[t._v("#")]),t._v(" 🤯准备工作")]),t._v(" "),a("p",[t._v("更新系统，我使用的是Debian11系统（Ubuntu同理）")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" update -y "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" upgrade -y\n")])])]),a("p",[t._v("安装必要工具")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v("  -y\n")])])]),a("h3",{attrs:{id:"🐋安装docker，docker-compose并配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐋安装docker，docker-compose并配置"}},[t._v("#")]),t._v(" 🐋安装docker，docker-compose并配置")]),t._v(" "),a("ol",[a("li",[t._v("下载docker")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" -qO- get.docker.com "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v("\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("设置docker开机自启")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("systemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" docker\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("重启docker")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("systemctl restart docker\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[t._v("安装docker-compose")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -L "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://github.com/docker/compose/releases/download/1.29.2/docker-compose-'),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("uname")]),t._v(" -s"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("-"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("uname")]),t._v(" -m"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v('"')]),t._v(" -o /usr/local/bin/docker-compose\n")])])]),a("ol",{attrs:{start:"5"}},[a("li",[t._v("docker-compose赋权")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" +x /usr/local/bin/docker-compose\n")])])]),a("ol",{attrs:{start:"6"}},[a("li",[t._v("修改时区为上海")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" timedatectl set-timezone Asia/Shanghai\n")])])]),a("h3",{attrs:{id:"🐅项目部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐅项目部署"}},[t._v("#")]),t._v(" 🐅项目部署")]),t._v(" "),a("ol",[a("li",[t._v("创建存配置文件的目录,然后进入目录下。")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" /opt/photoprism \n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /opt/photoprism\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("下载官方的docker-compose配置文件")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://dl.photoprism.app/docker/docker-compose.yml\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("以下为配置文件中文翻译内容（来自chatgpt）：")])]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'3.5'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# PhotoPrism的Docker Compose配置文件示例（Linux / AMD64）")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 注意：")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# - 在具有少于4GB交换空间的服务器上运行PhotoPrism，或者设置内存/交换限制，可能会导致意外重启（"崩溃"），例如当索引器临时需要更多内存来处理大文件时。')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# - 如果您在家庭网络之外的公共服务器上安装PhotoPrism，请始终在其后面运行安全的HTTPS反向代理，例如Traefik或Caddy。否则，您的文件和密码将以明文形式传输，并可能被任何人截获，包括您的提供商、黑客和政府：")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   https://docs.photoprism.app/getting-started/proxies/traefik/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置指南：")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# - https://docs.photoprism.app/getting-started/docker-compose/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# - https://docs.photoprism.app/getting-started/raspberry-pi/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# - https://www.photoprism.app/kb/activation")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 故障排除清单：")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# - https://docs.photoprism.app/getting-started/troubleshooting/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# - https://docs.photoprism.app/getting-started/troubleshooting/docker/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# - https://docs.photoprism.app/getting-started/troubleshooting/mariadb/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# CLI命令：")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# - https://docs.photoprism.app/getting-started/docker-compose/#command-line-interface")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# 当不以root用户身份运行时，所有命令可能都需要以"sudo"为前缀。')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 这将把家目录快捷方式~指向卷挂载中的/root。")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("photoprism")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 用于测试预览版本的 photoprism/photoprism:preview：")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" photoprism/photoprism"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("latest\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 在PhotoPrism正确配置和测试之前，请不要启用自动重启！")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 如果服务陷入重启循环，这可能是内存、文件系统、网络或数据库问题：")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## https://docs.photoprism.app/getting-started/troubleshooting/#fatal-server-errors")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# restart: unless-stopped")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("stop_grace_period")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 10s\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("depends_on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" mariadb\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("security_opt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" seccomp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("unconfined\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" apparmor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("unconfined\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2342:2342"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HTTP端口（主机:容器）")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_ADMIN_USER")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin"')]),t._v("                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 管理员登录用户名")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_ADMIN_PASSWORD")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"insecure"')]),t._v("          "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 初始管理员密码（8-72个字符）")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_AUTH_MODE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"password"')]),t._v("               "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 认证模式（public、password）")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_SITE_URL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:2342/"')]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# 服务器URL，格式为"http(s)://domain.name(:port)/(path)"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_DISABLE_TLS")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"false"')]),t._v("                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 禁用HTTPS/TLS，即使站点URL以https://开头并且有可用证书")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_DEFAULT_TLS")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),t._v("                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果没有其他证书可用，使用自签名的HTTPS/TLS证书作为默认")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_ORIGINALS_LIMIT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5000")]),t._v("               "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 原始文件的文件大小限制（MB）（增加以支持高分辨率视频）")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_HTTP_COMPRESSION")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gzip"')]),t._v("            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 提高传输速度和带宽利用率（none或gzip）")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_LOG_LEVEL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"info"')]),t._v("                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 日志级别：trace、debug、info、warning、error、fatal或panic")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_READONLY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"false"')]),t._v("                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 不要修改原始目录（功能受限）")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_EXPERIMENTAL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"false"')]),t._v("               "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启用实验性功能")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_DISABLE_CHOWN")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"false"')]),t._v("              "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 禁用启动时通过chmod和chown更新存储权限")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_DISABLE_WEBDAV")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"false"')]),t._v("             "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 禁用内置的WebDAV服务器")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_DISABLE_SETTINGS")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"false"')]),t._v("           "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 禁用设置界面和API")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_DISABLE_TENSORFLOW")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"false"')]),t._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 禁用所有依赖于TensorFlow的功能")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_DISABLE_FACES")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"false"')]),t._v("              "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 禁用人脸检测和识别（需要TensorFlow）")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_DISABLE_CLASSIFICATION")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"false"')]),t._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 禁用图像分类（需要TensorFlow）")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_DISABLE_VECTORS")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"false"')]),t._v("            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 禁用矢量图形支持")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_DISABLE_RAW")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"false"')]),t._v("                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 禁用原始图像的索引和转换")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_RAW_PRESETS")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"false"')]),t._v("                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在转换原始图像时启用应用用户预设（降低性能）")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_JPEG_QUALITY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("85")]),t._v("                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 更高的值增加JPEG图像和缩略图的质量和文件大小（25-100）")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_DETECT_NSFW")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"false"')]),t._v("                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 自动标记可能具有冒犯性的照片为私有（需要TensorFlow）")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_UPLOAD_NSFW")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),t._v("                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 允许上传可能具有冒犯性的照片（无TensorFlow效果）")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# PHOTOPRISM_DATABASE_DRIVER: "sqlite"         # SQLite是一个嵌入式数据库，不需要服务器')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_DATABASE_DRIVER")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mysql"')]),t._v("            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用MariaDB 10.5+或MySQL 8+代替SQLite以获得更好的性能")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_DATABASE_SERVER")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mariadb:3306"')]),t._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# MariaDB或MySQL数据库服务器（主机名:端口）")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_DATABASE_NAME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"photoprism"')]),t._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# MariaDB或MySQL数据库模式名称")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_DATABASE_USER")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"photoprism"')]),t._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# MariaDB或MySQL数据库用户名")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_DATABASE_PASSWORD")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"insecure"')]),t._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# MariaDB或MySQL数据库用户密码")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_SITE_CAPTION")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"基于AI的照片应用"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_SITE_DESCRIPTION")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 站点描述")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PHOTOPRISM_SITE_AUTHOR")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("                     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 站点作者")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 视频转码（https://docs.photoprism.app/getting-started/advanced/transcoding/）：")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# PHOTOPRISM_FFMPEG_ENCODER: "software"        # H.264/AVC编码器（software、intel、nvidia、apple、raspberry或vaapi）')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# PHOTOPRISM_FFMPEG_SIZE: "1920"               # 视频大小限制（像素）（720-7680）（默认值：3840）')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# PHOTOPRISM_FFMPEG_BITRATE: "32"              # 视频比特率限制（Mbit/s）（默认值：50）')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 第一次启动时运行/安装（选项：update https gpu tensorflow davfs clitools clean）：")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# PHOTOPRISM_INIT: "https gpu tensorflow"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 在初始化之后以非root用户身份运行（支持的值：0、33、50-99、500-600和900-1200）：")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# PHOTOPRISM_UID: 1000")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# PHOTOPRISM_GID: 1000")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# PHOTOPRISM_UMASK: 0000")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 在初始化之前以非root用户身份启动（支持的值：0、33、50-99、500-600和900-1200）：")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# user: "1000:1000"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 与FFmpeg和TensorFlow共享硬件设备（可选）：")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# devices:")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#  - "/dev/dri:/dev/dri"                         # Intel QSV')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#  - "/dev/nvidia0:/dev/nvidia0"                 # Nvidia CUDA')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#  - "/dev/nvidiactl:/dev/nvidiactl"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#  - "/dev/nvidia-modeset:/dev/nvidia-modeset"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#  - "/dev/nvidia-nvswitchctl:/dev/nvidia-nvswitchctl"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#  - "/dev/nvidia-uvm:/dev/nvidia-uvm"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#  - "/dev/nvidia-uvm-tools:/dev/nvidia-uvm-tools"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#  - "/dev/video11:/dev/video11"                 # Video4Linux视频编码设备（h264_v4l2m2m）')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("working_dir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/photoprism"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 不要更改或删除")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('## 存储文件夹："~"是家目录的快捷方式，"."是当前目录的快捷方式')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# "/host/folder:/photoprism/folder"                # 示例')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"~/Pictures:/photoprism/originals"')]),t._v("               "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 原始媒体文件（不要删除）")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# - "/example/family:/photoprism/originals/family" # 可以像这样挂载*其他*媒体文件夹')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# - "~/Import:/photoprism/import"                  # *可选*用于从原始文件夹导入文件的基本文件夹')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./storage:/photoprism/storage"')]),t._v("                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# *可写*的存储文件夹，用于缓存、数据库和辅助文件（不要删除）")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 数据库服务器（推荐）")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 参见 https://docs.photoprism.app/getting-started/faq/#should-i-use-sqlite-mariadb-or-mysql")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("mariadb")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mariadb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.11")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 如果MariaDB陷入重启循环，这可能是内存或文件系统问题：")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## https://docs.photoprism.app/getting-started/troubleshooting/#fatal-server-errors")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" unless"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("stopped\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("stop_grace_period")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 5s\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("security_opt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 参见 https://github.com/MariaDB/mariadb-docker/issues/434#issuecomment-1136151239")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" seccomp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("unconfined\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" apparmor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("unconfined\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("command")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mariadbd "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("innodb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("size=512M "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("transaction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("isolation=READ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("COMMITTED "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("character"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("set"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("server=utf8mb4 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("collation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("server=utf8mb4_unicode_ci "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("max"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("connections=512 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("innodb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("rollback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("timeout=OFF "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("innodb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("lock"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("wait"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("timeout=120\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 永远不要将数据库文件存储在不可靠的设备上，如USB闪存驱动器、SD卡或共享网络文件夹上：")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./database:/var/lib/mysql"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 不要删除")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("MARIADB_AUTO_UPGRADE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("MARIADB_INITDB_SKIP_TZINFO")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("MARIADB_DATABASE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"photoprism"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("MARIADB_USER")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"photoprism"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("MARIADB_PASSWORD")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"insecure"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("MARIADB_ROOT_PASSWORD")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"insecure"')]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Watchtower自动升级服务（可选）")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 参见 https://docs.photoprism.app/getting-started/updates/#watchtower")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('## 通过 "COMPOSE_PROFILES=update docker compose up -d" 激活')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("watchtower")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" unless"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("stopped\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" containrrr/watchtower\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("profiles")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"update"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("WATCHTOWER_CLEANUP")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("WATCHTOWER_POLL_INTERVAL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7200")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 每两小时检查更新")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/var/run/docker.sock:/var/run/docker.sock"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"~/.docker/config.json:/config.json"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 可选，用于身份验证，如果您有Docker Hub帐户")]),t._v("\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[t._v("修改docker-compose.yml文件后运行")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("docker-compose up -d\n")])])]),a("p",[t._v("然后就能在浏览器中使用 ip:端口访问了")]),t._v(" "),a("p",[t._v("如果想要配置反向代理并通过域名访问，你需要提前解析域名，并在docker-compose配置文件中更改为你的域名，配置反向代理，你可以参考"),a("a",{attrs:{href:"https://www.yunieebk.com/2023/07/30/caddy%E7%9A%84%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8%EF%BC%8C%E4%B8%8B%E8%BD%BDcaddy%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E5%92%8C%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%8F%91-%E7%BB%AD%E6%9C%9Fssl-%E8%AF%81%E4%B9%A6/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Caddy的基础使用，下载Caddy并部署反向代理和自动签发, 续期SSL 证书"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"🐽后记"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐽后记"}},[t._v("#")]),t._v(" 🐽后记")]),t._v(" "),a("p",[t._v("进入后台后可以设置中文并根据你的需要管理库和预览质量更改主题等，可以自行去探索。个人觉得界面还是比较简洁美观的。另外还支持webdav，就算是小硬盘也可以使用。\n"),a("InArticleAdsense",{attrs:{"data-ad-client":"ca-pub-5818850638223663","data-ad-slot":"1327307385"}})],1)],1)}),[],!1,null,null,null);s.default=e.exports}}]);