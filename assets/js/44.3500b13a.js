(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{417:function(s,a,t){"use strict";t.r(a);var e=t(10),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"é…ç½®systemdå®ç°rcloneå¼€æœºè‡ªåŠ¨æŒ‚è½½"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é…ç½®systemdå®ç°rcloneå¼€æœºè‡ªåŠ¨æŒ‚è½½"}},[s._v("#")]),s._v(" é…ç½®systemdå®ç°rcloneå¼€æœºè‡ªåŠ¨æŒ‚è½½")]),s._v(" "),t("InArticleAdsense",{attrs:{"data-ad-client":"ca-pub-5818850638223663","data-ad-slot":"1327307385"}}),s._v(" "),t("h2",{attrs:{id:"ğŸ«å‰è¨€"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ«å‰è¨€"}},[s._v("#")]),s._v(" ğŸ«å‰è¨€")]),s._v(" "),t("p",[s._v("â€‹    Rclone æ˜¯ä¸€æ¬¾ç®¡ç†äº‘å­˜å‚¨æ–‡ä»¶çš„å‘½ä»¤è¡Œç¨‹åºã€‚æ·»åŠ ç½‘ç›˜åå¯ä»¥æŒ‚è½½äº‘ç›˜åˆ°æœ¬æœºç›®å½•ï¼Œæ¯”å¦‚å°†onedriveå’ŒGoogle Driveç­‰çŸ¥åç½‘ç›˜æŒ‚è½½åˆ°æœ¬åœ°å½“ä½œæœ¬åœ°ç›®å½•ä½¿ç”¨("),t("a",{attrs:{href:"https://www.yunieebk.com/2023/08/22/linux%E4%B8%8B%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AErclone%E5%B9%B6%E6%B7%BB%E5%8A%A0onedrive%E7%BD%91%E7%9B%98%E5%8F%8Arclone%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Linuxä¸‹å¦‚ä½•å®‰è£…é…ç½®Rcloneå¹¶æ·»åŠ Onedriveç½‘ç›˜åŠRcloneçš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•"),t("OutboundLink")],1),s._v(")ï¼Œæ¯”å¦‚åœ¨embyä¸­å¸¸ç”¨åœ¨æŒ‚è½½å¤§å®¹é‡ç½‘ç›˜æ¥å­˜å‚¨å¤§é‡çš„å½±è§†æ–‡ä»¶ã€‚ä½†æ˜¯æ·»åŠ åæ¯æ¬¡é‡å¯éƒ½å¿…é¡»é‡æ–°æŒ‚è½½ï¼Œéå¸¸éº»çƒ¦ï¼Œæ‰€ä»¥é…ç½®æˆä¸ºsystemdæœåŠ¡æ–‡ä»¶å¯ä»¥å‡­å€Ÿç®€å•çš„systemctlå‘½ä»¤æ¥å®ç°å¯åŠ¨åœæ­¢é‡å¯ä»¥åŠå¼€æœºè‡ªå¯çš„æ“ä½œã€‚")]),s._v(" "),t("h2",{attrs:{id:"ğŸ¦æ–¹æ³•ä¸€ï¼šç›´æ¥é…ç½®systemdæ–‡ä»¶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¦æ–¹æ³•ä¸€ï¼šç›´æ¥é…ç½®systemdæ–‡ä»¶"}},[s._v("#")]),s._v(" ğŸ¦æ–¹æ³•ä¸€ï¼šç›´æ¥é…ç½®systemdæ–‡ä»¶")]),s._v(" "),t("p",[s._v("systmd serviceæ–‡ä»¶å¸¸è§çš„å­˜æ”¾ä½ç½®")]),s._v(" "),t("ol",[t("li",[t("p",[t("code",[s._v("/etc/systemd/system/")]),s._v("ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("/run/systemd/system/")]),s._v("ï¼šruntime systemd unit")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("/lib/systemd/system")]),s._v(" :å®‰è£…åº”ç”¨è‡ªå¸¦çš„serviceå­˜å‚¨åœ¨è¿™é‡Œï¼ˆä¼˜å…ˆçº§æœ€ä½ï¼‰")])])]),s._v(" "),t("p",[s._v("é€šå¸¸ä¿®æ”¹éƒ½æ˜¯åœ¨"),t("code",[s._v("/etc/systemd/system/")])]),s._v(" "),t("p",[s._v("æ‰€ä»¥åœ¨"),t("code",[s._v("/etc/systemd/system/")]),s._v("ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º"),t("code",[s._v("rclone-mount.service")]),s._v("çš„æ–‡ä»¶ã€‚")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nano")]),s._v(" /etc/systemd/system/rclone-mount.service\n")])])]),t("p",[s._v("ç„¶åè¾“å…¥ä»¥ä¸‹å†…å®¹")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Unit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Mount /opt/movie using rclone\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("After")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("network-online.target\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("forking\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/bin/rclone "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),s._v(" union:/ /opt/movie --allow-other --attr-timeout 5m --vfs-cache-mode full --vfs-cache-max-age 3h --vfs-cache-max-size 25G --vfs-read-chunk-size-limit 100M --buffer-size 256M --daemon\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStop")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/bin/fusermount -u /opt/movie\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Restart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("on-failure\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RestartSec")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Install"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WantedBy")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("multi-user.target\n")])])]),t("p",[t("strong",[s._v("è¿™é‡Œçš„"),t("code",[s._v("ExecStart")]),s._v("éƒ¨åˆ†ä¿®æ”¹ä¸ºä½ è‡ªå·±çš„rcloneæŒ‚è½½å‚æ•°ã€‚ExecStopåçš„"),t("code",[s._v("/opt/movie")]),s._v("ä¿®æ”¹ä¸ºè‡ªå·±çš„æŒ‚è½½è·¯å¾„")])]),s._v(" "),t("p",[s._v("æ¥ä¸‹æ¥é‡æ–°åŠ è½½systemd,è¾“å…¥ï¼š")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("systemctl daemon-reload\n")])])]),t("p",[s._v("ä¹‹åå°±å¯ä»¥ä½¿ç”¨")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("systemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" rclone-mount.service\n")])])]),t("p",[s._v("æ¥å®ç°å¼€æœºè‡ªå¯äº†ã€‚")]),s._v(" "),t("h2",{attrs:{id:"ğŸæ–¹æ³•äºŒï¼šå°†æŒ‚è½½å‘½ä»¤å†™å…¥è„šæœ¬ï¼Œå†é…ç½®systemdæ–‡ä»¶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ğŸæ–¹æ³•äºŒï¼šå°†æŒ‚è½½å‘½ä»¤å†™å…¥è„šæœ¬ï¼Œå†é…ç½®systemdæ–‡ä»¶"}},[s._v("#")]),s._v(" ğŸæ–¹æ³•äºŒï¼šå°†æŒ‚è½½å‘½ä»¤å†™å…¥è„šæœ¬ï¼Œå†é…ç½®systemdæ–‡ä»¶")]),s._v(" "),t("p",[s._v("é¦–å…ˆåˆ›å»ºä¸€ä¸ªè„šæœ¬ï¼Œè¿™é‡Œæˆ‘å°†è„šæœ¬æ”¾åœ¨rootç›®å½•ä¸‹")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nano")]),s._v(" /root/rclone_mount.sh\n")])])]),t("p",[s._v("ç„¶ååœ¨è„šæœ¬ä¸­å†™å…¥æˆ‘çš„æŒ‚è½½å‘½ä»¤ï¼š")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/sh")]),s._v("\nrclone "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),s._v(" union:/ /opt/movie --allow-other --attr-timeout 5m --vfs-cache-mode full --vfs-cache-max-age 3h --vfs-cache-max-size 25G --vfs-read-chunk-size-limit 100M --buffer-size 256M --daemon\n")])])]),t("p",[s._v("åœ¨è¿™ä¹‹åç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™ï¼š")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /root/rclone_mount.sh\n")])])]),t("p",[s._v("ç„¶åé…ç½®"),t("code",[s._v("/etc/systemd/system/rclone-mount.service")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nano")]),s._v(" /etc/systemd/system/rclone-mount.service\n")])])]),t("p",[s._v("å¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Unit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Mount /opt/movie using rclone\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("After")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("network-online.target\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("forking\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Environment")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/root/rclone_mount.sh\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStop")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/bin/fusermount -u /opt/movie\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Restart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("on-failure\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Install"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WantedBy")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("multi-user.target\n")])])]),t("p",[s._v("æ¥ä¸‹æ¥é‡æ–°åŠ è½½systemd,è¾“å…¥ï¼š")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("systemctl daemon-reload\n")])])]),t("p",[s._v("ä¹‹åå°±å¯ä»¥ä½¿ç”¨")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("systemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" rclone-mount.service\n")])])]),t("InArticleAdsense",{attrs:{"data-ad-client":"ca-pub-5818850638223663","data-ad-slot":"1327307385"}}),s._v(" "),t("p",[s._v("æ¥å®ç°å¼€æœºè‡ªå¯äº†ã€‚")])],1)}),[],!1,null,null,null);a.default=n.exports}}]);