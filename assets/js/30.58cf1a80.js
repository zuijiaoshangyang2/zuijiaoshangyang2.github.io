(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{403:function(a,s,t){"use strict";t.r(s);var e=t(10),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"闲置vps利用-使用docker-compose搭建一个qqflac音乐下载器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#闲置vps利用-使用docker-compose搭建一个qqflac音乐下载器"}},[a._v("#")]),a._v(" 闲置VPS利用——使用docker-compose搭建一个QQFlac音乐下载器")]),a._v(" "),t("h2",{attrs:{id:"❗本项目作者暂时没更新docker，所以请使用python的方式部署，在github界面作者有详细的说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#❗本项目作者暂时没更新docker，所以请使用python的方式部署，在github界面作者有详细的说明"}},[a._v("#")]),a._v(" ❗本项目作者暂时没更新docker，所以请使用python的方式部署，在GitHub界面作者有详细的说明")]),a._v(" "),t("InArticleAdsense",{attrs:{"data-ad-client":"ca-pub-5818850638223663","data-ad-slot":"1327307385"}}),a._v(" "),t("h2",{attrs:{id:"🦬前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🦬前言"}},[a._v("#")]),a._v(" 🦬前言")]),a._v(" "),t("h3",{attrs:{id:"🥸项目简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🥸项目简介"}},[a._v("#")]),a._v(" 🥸项目简介")]),a._v(" "),t("p",[a._v("QQ音乐作为国内最大的音乐播放平台之一，再加上"),t("s",[a._v("南山必胜客")]),a._v("腾讯的实力，无疑在国内音乐软件里处于统治地位。版权也算是最多的。但现在大部分热门歌曲不开绿钻会员只能播放一小部分。并且有时候你想要更方便地把qq音乐中你喜欢的音乐的无损音源下载下来。有时候你喜欢使用其他的播放器，但某首音乐的版权只在qq音乐，所以你想下载之后和其他音乐软件配合使用，这样更方便。综上所述，我个人觉得这还是很有用的一个项目。")]),a._v(" "),t("h3",{attrs:{id:"🐧项目展示"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🐧项目展示"}},[a._v("#")]),a._v(" 🐧项目展示")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2023/09/01/8z7t6GbKXVESasZ.png",alt:"屏幕截图 2023-09-01 213658.png"}})]),a._v(" "),t("p",[a._v("Github仓库地址："),t("a",{attrs:{href:"https://github.com/QiuChenlyOpenSource/QQFlacMusicDownloader",target:"_blank",rel:"noopener noreferrer"}},[a._v("QQFlacMusicDownloader"),t("OutboundLink")],1)]),a._v(" "),t("h2",{attrs:{id:"🫀开始搭建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🫀开始搭建"}},[a._v("#")]),a._v(" 🫀开始搭建")]),a._v(" "),t("h3",{attrs:{id:"🤓准备工作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🤓准备工作"}},[a._v("#")]),a._v(" 🤓准备工作")]),a._v(" "),t("p",[a._v("更新系统，我使用的是Debian11系统（Ubuntu同理）")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" update -y "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" upgrade -y\n")])])]),t("p",[a._v("安装必要工具")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v("  -y\n")])])]),t("h3",{attrs:{id:"🐋安装docker，docker-compose并配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🐋安装docker，docker-compose并配置"}},[a._v("#")]),a._v(" 🐋安装docker，docker-compose并配置")]),a._v(" "),t("ol",[t("li",[a._v("下载docker")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" -qO- get.docker.com "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v("\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[a._v("设置docker开机自启")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("systemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" docker\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[a._v("重启docker")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("systemctl restart docker\n")])])]),t("ol",{attrs:{start:"4"}},[t("li",[a._v("安装docker-compose")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" -L "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"https://github.com/docker/compose/releases/download/1.29.2/docker-compose-'),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("uname")]),a._v(" -s"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("-"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("uname")]),a._v(" -m"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v('"')]),a._v(" -o /usr/local/bin/docker-compose\n")])])]),t("ol",{attrs:{start:"5"}},[t("li",[a._v("docker-compose赋权")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" +x /usr/local/bin/docker-compose\n")])])]),t("ol",{attrs:{start:"6"}},[t("li",[a._v("修改时区为上海")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" timedatectl set-timezone Asia/Shanghai\n")])])]),t("h3",{attrs:{id:"😈项目部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#😈项目部署"}},[a._v("#")]),a._v(" 😈项目部署")]),a._v(" "),t("ol",[t("li",[a._v("新建目录")])]),a._v(" "),t("p",[a._v("我选择将docker-compose文件和存储下载的音乐的目录放到/qqmusicdl目录下，所以先按照以下步骤新建目录并切换到该目录：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" -p /opt/qqmusicdl/download "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /opt/qqmusicdl\n")])])]),t("p",[a._v("然后我们输入"),t("code",[a._v("ls")]),a._v("能看见这个目录下已经有一个download目录了，这是用来存储下载的音乐，因为本项目是将音乐下载到vps当中的，之后我们会介绍如何方便地将音乐文件取出来。")]),a._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[a._v("创建一个docker-compose.yml文件")])]),a._v(" "),t("p",[a._v("输入以下指令创建一个docker-compose.yml文件,在这之前请保证你在/opt/qqmusicdl目录下。")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" docker-compose.yml\n")])])]),t("p",[a._v("输入指令后会进入vim编辑器界面，然后复制以下内容：")]),a._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"3"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("services")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("downloader")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" registry.cn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("hangzhou.aliyuncs.com/music_downloader/qq_flac_music_downloader\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("container_name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" music\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("network_mode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" bridge\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("volumes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" /opt/qqmusicdl/download"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("/workspace/music "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#冒号左边输入我们上面创建的download目录，你可以改成你想要保存的位置")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"8888:8899"')]),a._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#冒号左边可以自定义为你想要的可用的，未被占用的端口号")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("restart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" always\n")])])]),t("p",[a._v("之后按键盘"),t("code",[a._v("ESC")]),a._v("键并输入"),t("code",[a._v(":")]),a._v("+wq保存退出vim编辑器。")]),a._v(" "),t("p",[a._v("然后拉取镜像并启动容器：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker-compose up -d\n")])])]),t("p",[a._v("然后使用ip:端口的方式访问网页检查是否成功运行。所以我需要在浏览器输入ip:8888以进入网页，如果想要用域名访问请参考这篇文章："),t("a",{attrs:{href:"https://www.yunieebk.com/2023/07/30/caddy%E7%9A%84%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8%EF%BC%8C%E4%B8%8B%E8%BD%BDcaddy%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E5%92%8C%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%8F%91-%E7%BB%AD%E6%9C%9Fssl-%E8%AF%81%E4%B9%A6/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Caddy的基础使用，下载Caddy并部署反向代理和自动签发, 续期SSL 证书"),t("OutboundLink")],1)]),a._v(" "),t("h3",{attrs:{id:"👻下载alist来访问自己下载的本地文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#👻下载alist来访问自己下载的本地文件"}},[a._v("#")]),a._v(" 👻下载Alist来访问自己下载的本地文件")]),a._v(" "),t("p",[a._v("alist文档地址："),t("a",{attrs:{href:"https://alist.nn.ci/zh/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Alist文档"),t("OutboundLink")],1)]),a._v(" "),t("p",[a._v("alist的GitHub地址："),t("a",{attrs:{href:"https://github.com/alist-org/alist",target:"_blank",rel:"noopener noreferrer"}},[a._v("Github"),t("OutboundLink")],1)]),a._v(" "),t("p",[a._v("运行官方一键脚本")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" -fsSL "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"https://alist.nn.ci/v3.sh"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v(" -s "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n")])])]),t("p",[a._v("运行完安按照提示先输入")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /opt/alist\n")])])]),t("p",[a._v("再输入")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("./alist admin "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" NEW_PASSWORD\n")])])]),t("p",[a._v("把"),t("code",[a._v("NEW_PASSWORD")]),a._v("改成你想要的密码。")]),a._v(" "),t("p",[a._v("输入 ip:5244进入web页面，使用admin和你设定的密码登录（登陆后可更改用户名）")]),a._v(" "),t("blockquote",[t("p",[a._v("同样可以通过caddy配置反向代理使用域名访问。")])]),a._v(" "),t("p",[a._v("根据提示使用安装后出现的初始密码登录账号，点击下方"),t("code",[a._v("管理")]),a._v("按钮进入管理界面，点击"),t("code",[a._v("存储")]),a._v("再点击"),t("code",[a._v("添加")]),a._v(",填入你的挂载路径和根文件夹路径。")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2023/09/01/nr3Kas1GUIlHMCL.png",alt:"gz.png"}})]),a._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2023/09/01/N71a6ibCfLTgYhq.png",alt:"qqmsc.png"}})]),a._v(" "),t("p",[a._v("然后点击保存，之后回到主页就能看见你自己创建的目录了，进去就是你保存的音乐")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2023/09/01/WIQMblZuKj8vYoq.png",alt:"屏幕截图 2023-09-01 225015.png"}})]),a._v(" "),t("p",[a._v("接下来这这里面你可以自己管理音乐的删除或可以之直接在这里通过浏览器下载音乐文件，当然这个文件管理器也内置了音乐播放器，非常好用的一个文件管理器。")]),a._v(" "),t("h2",{attrs:{id:"🐇后记"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🐇后记"}},[a._v("#")]),a._v(" 🐇后记")]),a._v(" "),t("p",[a._v("我个人因为开了AdGuard和卡巴斯基这类去广告或广告拦截软件，所以打开网站会无法显示搜索菜单栏，建议无法正常显示的试着先关闭这类软件，在手机上使用桌面模式可以正常使用。")])],1)}),[],!1,null,null,null);s.default=r.exports}}]);