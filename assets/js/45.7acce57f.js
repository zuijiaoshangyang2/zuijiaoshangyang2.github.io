(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{418:function(a,s,t){"use strict";t.r(s);var e=t(10),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"ubuntu24-04-ltså®‰è£…mysql-5-7-23"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu24-04-ltså®‰è£…mysql-5-7-23"}},[a._v("#")]),a._v(" Ubuntu24.04 LTSå®‰è£…mysql 5.7.23")]),a._v(" "),t("h2",{attrs:{id:"ğŸ”ä¸€ã€å®‰è£…ä¾èµ–"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”ä¸€ã€å®‰è£…ä¾èµ–"}},[a._v("#")]),a._v(" ğŸ”ä¸€ã€å®‰è£…ä¾èµ–")]),a._v(" "),t("p",[a._v("Ubuntu 24å¼€å§‹ä¸å†ä½¿ç”¨libtinfo5ï¼Œè€Œæ˜¯é»˜è®¤ä½¿ç”¨libtinfo6ï¼Œä¹Ÿæ²¡æœ‰ libaio1 å’Œ libaio-devã€‚ä½†æ˜¯5.7.23ç‰ˆæœ¬æ¯”è¾ƒæ—§ï¼Œéœ€è¦è¿™äº›æ—§ä¾èµ–ã€‚æ‰€ä»¥é¦–å…ˆå®‰è£…è¿™äº›å¿…è¦çš„ä¾èµ–ã€‚")]),a._v(" "),t("h3",{attrs:{id:"ğŸ«¥1-1-å®‰è£…libtinfo5"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ«¥1-1-å®‰è£…libtinfo5"}},[a._v("#")]),a._v(" ğŸ«¥1.1 å®‰è£…libtinfo5")]),a._v(" "),t("p",[a._v("å‚è€ƒï¼š"),t("a",{attrs:{href:"https://blog.csdn.net/Yuking004/article/details/144937295",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://blog.csdn.net/engchina/article/details/135396971"),t("OutboundLink")],1)]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" update\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" http://security.ubuntu.com/ubuntu/pool/universe/n/ncurses/libtinfo5_6.3-2ubuntu0.1_amd64.deb\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" ./libtinfo5_6.3-2ubuntu0.1_amd64.deb\n")])])]),t("h3",{attrs:{id:"ğŸ«1-2-å®‰è£…libaio1-å’Œ-libaio-dev"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ«1-2-å®‰è£…libaio1-å’Œ-libaio-dev"}},[a._v("#")]),a._v(" ğŸ«1.2 å®‰è£…libaio1 å’Œ libaio-dev")]),a._v(" "),t("p",[a._v("å‚è€ƒï¼šhttps://blog.csdn.net/engchina/article/details/139812240")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" -O http://launchpadlibrarian.net/646633572/libaio1_0.3.113-4_amd64.deb\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" dpkg -i libaio1_0.3.113-4_amd64.deb \n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" libaio-dev\n")])])]),t("h2",{attrs:{id:"ğŸ¤‘äºŒã€å®‰è£…mysql-5-7-23"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¤‘äºŒã€å®‰è£…mysql-5-7-23"}},[a._v("#")]),a._v(" ğŸ¤‘äºŒã€å®‰è£…mysql 5.7.23")]),a._v(" "),t("h3",{attrs:{id:"ğŸ§2-1-è·å–deb-bundle"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ§2-1-è·å–deb-bundle"}},[a._v("#")]),a._v(" ğŸ§2.1 è·å–deb-bundle")]),a._v(" "),t("h4",{attrs:{id:"åˆ›å»ºç›®å½•å¹¶è¿›å…¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åˆ›å»ºç›®å½•å¹¶è¿›å…¥"}},[a._v("#")]),a._v(" åˆ›å»ºç›®å½•å¹¶è¿›å…¥")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" -p /opt/mysql "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /opt/mysql\n")])])]),t("h4",{attrs:{id:"ä¸‹è½½å‹ç¼©åŒ…"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‹è½½å‹ç¼©åŒ…"}},[a._v("#")]),a._v(" ä¸‹è½½å‹ç¼©åŒ…")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://downloads.mysql.com/archives/get/p/23/file/mysql-server_5.7.23-1ubuntu18.04_amd64.deb-bundle.tar\n")])])]),t("h4",{attrs:{id:"è§£å‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è§£å‹"}},[a._v("#")]),a._v(" è§£å‹")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" xvf ./mysql-server_5.7.23-1ubuntu18.04_amd64.deb-bundle.tar\n")])])]),t("h4",{attrs:{id:"å®‰è£…-libmysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å®‰è£…-libmysql"}},[a._v("#")]),a._v(" å®‰è£…./libmysql*")]),a._v(" "),t("div",{staticClass:"language-bash\\ extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("sudo apt-get install ./libmysql*\n")])])]),t("h3",{attrs:{id:"ğŸº2-2-å®‰è£…å®¢æˆ·ç«¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ğŸº2-2-å®‰è£…å®¢æˆ·ç«¯"}},[a._v("#")]),a._v(" ğŸº2.2 å®‰è£…å®¢æˆ·ç«¯")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" ./mysql-community-client_5.7.23-1ubuntu18.04_amd64.deb\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" ./mysql-client_5.7.23-1ubuntu18.04_amd64.deb\n")])])]),t("h3",{attrs:{id:"ğŸ¥¶2-3-å®‰è£…æœåŠ¡ç«¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¥¶2-3-å®‰è£…æœåŠ¡ç«¯"}},[a._v("#")]),a._v(" ğŸ¥¶2.3 å®‰è£…æœåŠ¡ç«¯")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" ./mysql-community-server_5.7.23-1ubuntu18.04_amd64.deb\n")])])]),t("p",[a._v("åœ¨è¿™ä¸ªå®‰è£…è¿‡ç¨‹ä¸­ä¼šéœ€è¦è®¾ç½®rootç”¨æˆ·çš„å¯†ç ã€‚å®‰è£…ä¹‹åç»§ç»­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" ./mysql-server_5.7.23-1ubuntu18.04_amd64.deb\n")])])]),t("p",[a._v("æ­¤æ—¶å°±å®‰è£…å®Œæˆäº†")]),a._v(" "),t("h3",{attrs:{id:"ğŸ¥¸2-4-éªŒè¯å®‰è£…"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¥¸2-4-éªŒè¯å®‰è£…"}},[a._v("#")]),a._v(" ğŸ¥¸2.4 éªŒè¯å®‰è£…")]),a._v(" "),t("p",[a._v("è¾“å…¥"),t("code",[a._v("systemctl status mysql")]),a._v("å¯éªŒè¯ï¼š")]),a._v(" "),t("img",{attrs:{src:"https://s2.loli.net/2024/08/21/NGwqLZDzlmnCYau.jpg",alt:"status"}}),a._v(" "),t("p",[a._v("å¦‚æœå¦‚ä¸Šå›¾ä¸€æ ·å¯ä»¥çœ‹åˆ°runningå°±è¯´æ˜è¿è¡ŒæˆåŠŸäº†ã€‚")]),a._v(" "),t("p",[a._v("ç„¶åå°è¯•è¿›å…¥MySQL")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("mysql -u root -p\n")])])]),t("p",[a._v("è¾“å…¥åˆšæ‰å®‰è£…è¿‡ç¨‹ä¸­è®¾ç½®çš„å¯†ç è¿›å…¥mysqlã€‚")]),a._v(" "),t("p",[a._v("è¾“å…¥"),t("code",[a._v("SELECT VERSION();")]),a._v("å¯ä»¥æŸ¥çœ‹ç‰ˆæœ¬ã€‚è¯´æ˜å®‰è£…æˆåŠŸï¼Œä¸”æ­£å¸¸è¿è¡Œï¼Œä¸”ä¸ºæ­£ç¡®ç‰ˆæœ¬ã€‚")]),a._v(" "),t("h2",{attrs:{id:"ğŸ¥³ä¸‰ã€ä¿®æ”¹datadir"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¥³ä¸‰ã€ä¿®æ”¹datadir"}},[a._v("#")]),a._v(" ğŸ¥³ä¸‰ã€ä¿®æ”¹datadir")]),a._v(" "),t("p",[a._v("æœ‰æ—¶å€™éœ€è¦ä¿®æ”¹ä¸€ä¸ªdatadiræ¥å­˜å‚¨æ•°æ®ï¼Œæ¯”å¦‚æƒ³è¦æŒ‚è½½ä¸€ä¸ªç¡¬ç›˜æ¥ä¸“é—¨å­˜å‚¨æ•°æ®ç­‰ã€‚")]),a._v(" "),t("p",[a._v("é¦–å…ˆåœæ­¢mysqlè¿›ç¨‹")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("systemctl stop mysql\n")])])]),t("p",[a._v("ç„¶åç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /etc/mysql/mysql.conf.d/mysqld.cnf\n")])])]),t("p",[a._v("é…ç½®æ–‡ä»¶ä¸­æœ‰è¿™æ ·ä¸€æ®µé…ç½®ï¼š")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("mysqld"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\npid-file        "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" /var/run/mysqld/mysqld.pid\nsocket          "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" /var/run/mysqld/mysqld.sock\ndatadir         "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" /var/lib/mysql                "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#ä¿®æ”¹æ­¤è¡Œ")]),a._v("\nlog-error       "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" /var/log/mysql/error.log\n")])])]),t("p",[a._v("æˆ‘æƒ³è¦æŠŠæˆ‘çš„"),t("code",[a._v("datadir")]),a._v("æ”¹ä¸º"),t("code",[a._v("/data/mysql")]),a._v(",é‚£ä¹ˆéœ€è¦ä¿®æ”¹"),t("code",[a._v("datadir")]),a._v("åé¢çš„å†…å®¹")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("mysqld"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\npid-file        "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" /var/run/mysqld/mysqld.pid\nsocket          "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" /var/run/mysqld/mysqld.sock\ndatadir         "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" /data/mysql                "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#ä¿®æ”¹æ­¤è¡Œ")]),a._v("\nlog-error       "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" /var/log/mysql/error.log\n")])])]),t("p",[a._v("ç„¶åå°†"),t("code",[a._v("/var/lib/mysql")]),a._v("ä¸‹åŸæœ¬çš„å†…å®¹å…¨éƒ¨å¤åˆ¶åˆ°æƒ³è¦æ›´æ”¹çš„ç›®å½•"),t("code",[a._v("/data/mysql")]),a._v("ä¸‹é¢")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" -R /var/lib/mysql/*  /data/mysql/\n")])])]),t("p",[a._v("ç„¶åæ›´æ”¹ç›®å½•çš„æ‰€æœ‰è€…ï¼š")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("chown")]),a._v(" -R mysql:mysql /data/mysql\n")])])]),t("p",[a._v("ä¹‹åå°è¯•å¯åŠ¨MySQLï¼š")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("systemctl start mysql\n")])])]),t("p",[a._v("è¿™æ ·å°±ä¿®æ”¹æˆåŠŸäº†ã€‚")]),a._v(" "),t("h2",{attrs:{id:"ğŸ‘½å››ã€ä¿®æ”¹ç›®å½•æ—¶é‡è§çš„é—®é¢˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ‘½å››ã€ä¿®æ”¹ç›®å½•æ—¶é‡è§çš„é—®é¢˜"}},[a._v("#")]),a._v(" ğŸ‘½å››ã€ä¿®æ”¹ç›®å½•æ—¶é‡è§çš„é—®é¢˜")]),a._v(" "),t("p",[a._v("æœ‰æ—¶å€™è¿›è¡Œå¦‚ä¸Šä¿®æ”¹åï¼Œæ— è®ºå¦‚ä½•ä¹Ÿä¸èƒ½å¯åŠ¨MySQLï¼Œå¯èƒ½æ˜¯å› ä¸ºç³»ç»Ÿä¸­å®‰è£…äº†AppArmorã€‚è¿™ä¼šé™åˆ¶MySQLå¯¹ç›®å½•çš„è®¿é—®æƒé™ã€‚")]),a._v(" "),t("h3",{attrs:{id:"ğŸ®4-1-æ£€æŸ¥æ˜¯å¦å®‰è£…å¹¶å¼€å¯äº†apparmor"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ®4-1-æ£€æŸ¥æ˜¯å¦å®‰è£…å¹¶å¼€å¯äº†apparmor"}},[a._v("#")]),a._v(" ğŸ®4.1 æ£€æŸ¥æ˜¯å¦å®‰è£…å¹¶å¼€å¯äº†AppArmor")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("user@30-6-database:~$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" aa-enabled \nYes\n")])])]),t("p",[a._v("å¦‚ä¸Šæ˜¾ç¤ºYESå³å®‰è£…å¹¶å¼€å¯äº†AppArmorã€‚")]),a._v(" "),t("p",[a._v("ç„¶åè¿›å…¥/etc/apparmor.d/")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /etc/apparmor.d/\n")])])]),t("p",[a._v("æŸ¥çœ‹æœ‰å…³MySQLçš„é…ç½®ï¼š")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" mysql\n")])])]),t("p",[a._v("å¯ä»¥çœ‹åˆ°å¦‚ä¸‹æ–‡ä»¶ï¼š")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2024/08/21/Wvhbt3wLqk4DHrN.jpg",alt:"mysql"}})]),a._v(" "),t("p",[a._v("ç¼–è¾‘æ­¤æ–‡ä»¶ï¼š")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" usr.sbin.mysqld\n")])])]),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2024/08/21/1Cpgae6tkrnW8MK.jpg",alt:"mysqld"}})]),a._v(" "),t("p",[a._v("å¦‚ä¸Šï¼Œæ‰¾åˆ°"),t("code",[a._v("# Allow data dir access")]),a._v("ä¸€æ ï¼Œæ·»åŠ "),t("code",[a._v("/data/mysql/ rw,")]),a._v(" ï¼Œèµ‹äºˆMySQLè¯»å†™æˆ‘ä»¬çš„æ–°datadirç›®å½•çš„æƒé™ã€‚")]),a._v(" "),t("p",[a._v("ç„¶åé‡å¯apparmorä½¿é…ç½®ç”Ÿæ•ˆï¼š")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("systemctl restart apparmor\n")])])]),t("p",[a._v("ä¹‹åå†æ¬¡å°è¯•å¯åŠ¨MySQLã€‚è¿™æ ·å°±ä¸ä¼šæŠ¥é”™äº†ã€‚")])])}),[],!1,null,null,null);s.default=r.exports}}]);